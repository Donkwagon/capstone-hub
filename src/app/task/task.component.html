<div class="task-interface c" *ngFor="let task of tasks | async">

  <div class="overall-task r">
    <div class="c f1">
      <h1>{{task.title}}</h1>
      <div class="r">
        <div class="member r" *ngFor="let member of task.members">
          <img [src]="member.photoUrl"/>
          {{member.name}}
        </div>
      </div>
      <p>{{task.info}}</p>
      <div class="action-bar r">
        <div class="btn paper paper-raise " >
          Mark as Complete
        </div>
        &nbsp;&nbsp;&nbsp;&nbsp;
        <div class="btn paper paper-raise" >
          Edit
        </div>
      </div>
    </div>
    <div class="due c">
      {{task.due_at}}
    </div>
  </div>

  <div class="c">

    <div class="subtask" *ngFor="let subtask of task.subTasks">

      <h3>{{subtask.title}}</h3>
      <p>{{subtask.info}}</p>
      <span class="text-btn">+ add a subtask</span>
      <br>
      <div class="sub-task-list c">
          <div class="sub-task-form c">
            <h3>{{subtask.title}} > New Subtask</h3>
            <input placeholder="subtask-title" [(ngModel)]="subtask.title" name="subtask-title"/>
            <br>
            <textarea placeholder="subtask-info"  [(ngModel)]="subtask.info" name="subtask-info"></textarea>
            <br>
            <input type="date"  [(ngModel)]="subtask.due_at" max="task.due_at" name="subtask-due_at"/>
            
            <div class="input-row r">
              <div class="members r wr">
                  <div class="input-label c">
                    Members
                  </div>
                <div class="member r" *ngFor="let member of members | async" (click)="addMember(member)">
                  <img [src]="member.photoUrl"/>
                  {{member.name}}
                </div>
              </div>
            </div>
    
            <div class="submission-row r">
              <div class="btn paper paper-raise publish-btn" (click)="update()">Add Subtask</div>
              &nbsp;&nbsp;&nbsp;&nbsp;
              <div class="btn paper paper-raise" (click)="discard()">Discard</div>
            </div>
          </div>
        
      </div>
      <br>
      
    </div>

    <div class="sub-task-form c">
      <h3>{{task.title}} > New Subtask</h3>
      <input placeholder="subtask-title" [(ngModel)]="newTask.title" name="subtask-title"/>
      <br>
      <textarea placeholder="subtask-info"  [(ngModel)]="newTask.info" name="subtask-info"></textarea>
      <br>
      <input type="date"  [(ngModel)]="newTask.due_at" max="task.due_at" name="subtask-due_at"/>
      
      <div class="input-row r">
        <div class="members r wr">
            <div class="input-label c">
              Members
            </div>
          <div class="member r" *ngFor="let member of members | async" (click)="addMember(member)">
            <img [src]="member.photoUrl"/>
            {{member.name}}
          </div>
        </div>
      </div>

      <div class="submission-row r">
        <div class="btn paper paper-raise publish-btn" (click)="update()">Add Subtask</div>
        &nbsp;&nbsp;&nbsp;&nbsp;
        <div class="btn paper paper-raise" (click)="discard()">Discard</div>
      </div>
    </div>
  </div>
  <!-- <pre>
    {{task | json}}
  </pre> -->
</div>